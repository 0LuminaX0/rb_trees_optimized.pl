# RB_TREES. Оптимізована реалізація червоно-чорного дерева на Prolog

Ця реалізація червоно-чорного дерева написана мовою Prolog і базується на бібліотеці CLP(FD) для обмежень над скінченними доменами. Вона включає основні операції: 
- **Вставка** (з балансуванням кольорів)
- **Видалення** (з підтримкою подвійного чорного кольору)
- **Пошук мінімального та максимального елемента**
- **Перевірка на порожність**

Дерево представлено у вигляді терму `t(Колір, Ключ, ЛівеПіддерево, ПравеПіддерево)`, де `Колір` може бути:
- `b` — чорний
- `r` — червоний
- `bb` — подвійний чорний (використовується для балансування після видалення)
- `t(b, nil, nil, nil)` — порожнє дерево

## Встановлення та Використання
### Необхідні залежності
Потрібен інтерпретатор SWI-Prolog з підтримкою бібліотеки `clpfd`.

### Основні Операції

#### Перевірка на порожнє дерево
```prolog
?- rb_empty(Tree).
Tree = t(b, nil, nil, nil).
```

#### Вставка елементів
```prolog
?- rb_insert(t(b, nil, nil, nil), 10, Tree).
Tree = t(b, 10, t(b, nil, nil, nil), t(b, nil, nil, nil)).
```

#### Видалення елемента
```prolog
?- rb_delete(Tree, 10, NewTree).
NewTree = t(b, nil, nil, nil).
```

## Балансування
### Випадки балансування після вставки
1. **Дядько червоний** → Перефарбування.
2. **Дядько чорний, "зигзаг"** → Подвійне обертання.
3. **Дядько чорний, "пряма лінія"** → Одинарне обертання.
4. **Корінь чорний** → Баланс не порушений.

### Випадки балансування після видалення
1. **Брат червоний** → Перефарбування та обертання.
2. **Брат чорний, діти чорні, батько чорний** → Перефарбування.
3. **Брат чорний, ближчий племінник червоний** → Подвійне обертання.
4. **Брат чорний, дальший племінник червоний** → Одинарне обертання.

## Оптимізації
- **CLP(FD) обмеження** (`#<`, `#>`) покращують порівняння ключів.
- **Мінімальне використання додаткових перевірок**.
- **Упорядкування випадків балансування** для скорочення рекурсивних викликів.

## Ліцензія
Цей код є відкритим та базується на початковій версії від [Roman Pitak](https://github.com/romanpitak/rb_trees.pl), з оптимізаціями та розширенням від Andrii Negrub.